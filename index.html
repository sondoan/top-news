<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Top News</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background-color: #f4f6f9; }
    header { background-color: #0d1b2a; color: white; padding: 1rem; }
    header h2 { margin: 0; font-weight: bold; }
    .nav-link { color: #f1f1f1 !important; margin: 0 0.5rem; font-size: 0.9rem; }
    .nav-link.active { text-decoration: underline; }
    .nav-link:hover { text-decoration: underline; color: #ffffff !important; }
    footer { background-color: #e9ecef; padding: 1rem; text-align: center; color: #555; font-size: 0.9rem; margin-top: 2rem; }
    .card { border: none; border-radius: 8px; transition: transform 0.2s ease, box-shadow 0.2s ease; }
    .card:hover { transform: translateY(-4px); box-shadow: 0 6px 15px rgba(0,0,0,0.15); cursor: pointer; }
    .card-title { font-size: 0.95rem; font-weight: bold; color: #0d1b2a; }
    .card-text { font-size: 0.85rem; color: #444; }
    .badge { font-size: 0.7rem; margin-right: 0.2rem; }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="container d-flex justify-content-between align-items-center">
      <h2>üåç Global News</h2>
      <nav>
        <a href="#" class="nav-link active" data-lang="en">English</a>
        <a href="#" class="nav-link" data-lang="vi">Ti·∫øng Vi·ªát</a>
        <a href="#" class="nav-link" data-lang="jp">Êó•Êú¨Ë™û</a>
      </nav>
    </div>
  </header>

  <!-- Main Content -->
  <div class="container my-4">
    <h4 class="mb-3 text-center">Top News</h4>
    <div class="d-flex justify-content-center mb-3" id="topic-filters"></div>
    <div id="news-list" class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-3"></div>
  </div>

  <!-- Footer -->
  <footer>
    ¬© 2025 Global News. All rights reserved.
  </footer>

  <script>
    let currentLang = "en";
    let allArticles = []; // store loaded articles

    const topicColors = {
      "Politics": "danger",
      "Tech": "primary",
      "Health": "success",
      "Sports": "warning",
      "Business": "info",
      "Entertainment": "secondary"
    };

    function displayArticles(articles) {
      const list = document.getElementById("news-list");
      list.innerHTML = "";
      articles.forEach(article => {
        const card = document.createElement("div");
        card.className = "col";
        const topicClass = topicColors[article.topic] || "dark";

        card.innerHTML = `
          <div class="card h-100 shadow-sm">
            <div class="card-body p-3">
              <h6 class="card-title mb-2">
                <a href="${article.url}" target="_blank" class="text-decoration-none">${article.title}</a>
              </h6>
              <p class="card-text">${article.summary}</p>
              <span class="badge bg-${topicClass}">${article.topic}</span>
              <span class="badge bg-success">${article.location}</span>
            </div>
          </div>
        `;
        list.appendChild(card);
      });
    }

    async function loadNews(lang) {
      try {
        const res = await fetch(`news_${lang}.json`);
        const data = await res.json();
        allArticles = data.articles;

        const filterDiv = document.getElementById("topic-filters");
        filterDiv.innerHTML = "";

        // Collect topics
        const topics = [...new Set(allArticles.map(a => a.topic))];
        topics.unshift("All");

        // Create topic filter buttons
        topics.forEach(topic => {
          const btn = document.createElement("button");
          btn.className = "btn btn-outline-primary btn-sm mx-1";
          btn.textContent = topic;
          btn.onclick = () => {
            if (topic === "All") {
              displayArticles(allArticles);
            } else {
              displayArticles(allArticles.filter(a => a.topic === topic));
            }
          };
          filterDiv.appendChild(btn);
        });

        // Show all by default
        displayArticles(allArticles);

      } catch (err) {
        console.error("Error loading news:", err);
      }
    }

    // Language switch
    document.querySelectorAll(".nav-link").forEach(link => {
      link.addEventListener("click", (e) => {
        e.preventDefault();
        const lang = link.getAttribute("data-lang");
        if(lang !== currentLang) {
          currentLang = lang;
          document.querySelectorAll(".nav-link").forEach(l => l.classList.remove("active"));
          link.classList.add("active");
          loadNews(lang);
        }
      });
    });

    // Initial load
    loadNews(currentLang);
  </script>
</body>
</html>

